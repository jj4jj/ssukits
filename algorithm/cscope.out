cscope 15 $HOME/github/ssukits/algorithm               0000009579
	@AStar.cpp

3 
	~"ASr.h
"

4 
	~"ba£/Log.h
"

5 
	~"ba£/CommÚMaüo.h
"

7 
	gASr2D
::~
	$ASr2D
()

9 
	`De¡roy
();

10 
	}
}

11 
	gASr2D
::
	$In™
(
iWidth
,
iHeight
)

13 
iV¡Magic
 = 0;

14 
	`as£¹
(
iWidth
*
iHeight
 > 0);

15 
p2DMeshD©a
 = 
Ãw
 
A¡¬Node
[
iWidth
*
iHeight
];

16 if(
NULL
 =ğ
p2DMeshD©a
)

20 
iM­Width
 = 
iWidth
;

21 
iM­Height
 = 
iHeight
;

22 
vecP©h
.
	`ş—r
();

23 
İ’Li¡
.
	`ş—r
();

24 
şo£Li¡
.
	`ş—r
();

25 
pâIsP©hNode
 = 
NULL
;

26 
posSrc
.
	`Re£t
();

27 
posD¡
.
	`Re£t
(0);

29 
	}
}

31 
A¡¬Node
 * 
	gASr2D
::
	$G‘Node
(
Pos2D
 
pos
)

33 if(
	`IsPosInV®id
(
pos
))

35  
NULL
;

37  
p2DMeshD©a
 + 
pos
.
x
*
iM­Width
+pos.
y
;

38 
	}
}

39 
	gASr2D
::
	$ReC®cP©h
(
Pos2D
 
¤c
,Pos2D 
d¡
)

41 
vecP©h
.
	`ş—r
();

42 
İ’Li¡
.
	`ş—r
();

43 
şo£Li¡
.
	`ş—r
();

44 
posSrc
 = 
¤c
;

45 
posD¡
 = 
d¡
;

48 if(
	`Ex‹ndNode
(
¤c
) < 0)

52 
iV¡Magic
++;

54 
	`as£¹
(
iV¡Magic
 != 0);

55 
	`S‘PosVis™ed
(
¤c
);

56 
	`In£¹IÁoClo£Li¡
(
¤c
);

58 
	}
}

59 
	gASr2D
::
	$S‘PosVis™ed
(cÚ¡ 
Pos2D
 & 
pos
)

61 if(
	`IsPosInV®id
(
pos
))

65 
A¡¬Node
* 
node
 = 
	`G‘Node
(
pos
);

66 if(
node
)

68 
node
->
iVis™
 = 
iV¡Magic
;

70 
	}
}

71 
	gASr2D
::
	$In£¹IÁoO³nLi¡
(cÚ¡ 
Pos2D
& 
pos
)

73 
	`S‘PosVis™ed
(
pos
);

75 
İ’Li¡
.
	`push_back
(
pos
);

76 
	}
}

78 
	gASr2D
::
	$In£¹IÁoClo£Li¡
(cÚ¡ 
Pos2D
& 
pos
)

80 
şo£Li¡
.
	`push_back
(
pos
);

81 
	}
}

83 
boŞ
 
	gASr2D
::
	$IsPosInV®id
(cÚ¡ 
Pos2D
 & 
pos
)

85  (
pos
.
x
 < 0 ||…os.x >ğ
iM­Width
 ||

86 
pos
.
y
 < 0 ||…os.y >ğ
iM­Height
);

87 
	}
}

88 
	gASr2D
::
G‘NodeNeighbÜs
(
Pos2D
 
pos
,
veùÜ
<Pos2D> &
ngbs
)

91 
	giD–X
[] = {0,1,0,-1};

92 
	giD–Y
[] = {1,0,-1,0};

93 
	gi
 = 0 ;i < 4; ++i)

95 
Pos2D
 
Åos
(
pos
.
x
+
iD–X
[
i
],pos.
y
+
iD–Y
[i]);

96 if(
IsPosInV®id
(
Åos
))

100 
	gngbs
.
push_back
(
Åos
);

106 
	gASr2D
::
	$PİMšCo¡NodePos
(
Pos2D
 & 
pos
)

109 if(
İ’Li¡
.
	`em±y
())

114 
pos
 = 
İ’Li¡
.
	`back
();

115 
İ’Li¡
.
	`pİ_back
();

119 
	}
}

120 
boŞ
 
	gASr2D
::
	$IsPosVis™ed
(cÚ¡ 
Pos2D
& 
pos
)

122 
A¡¬Node
* 
node
 = 
	`G‘Node
(
pos
);

123 if(
NULL
 =ğ
node
)

125  
Œue
;

127  (
node
->
iVis™
 =ğ
iV¡Magic
);

128 
	}
}

129 
	gASr2D
::
	$S‘PFNIsP©hNode
(
PFNIsP©hNode
 
_pâIsP©hNode
)

131 
pâIsP©hNode
 = 
_pâIsP©hNode
;

132 
	}
}

133 
	gASr2D
::
	$Ex‹ndNode
(
Pos2D
& 
pos
)

135 
veùÜ
 < 
Pos2D
 > 
ngbs
;

136 
	`G‘NodeNeighbÜs
(
pos
,
ngbs
);

137 if(
ngbs
.
	`em±y
())

142 
A¡¬Node
 * 
¢ode
 = 
	`G‘Node
(
pos
);

143 if(
NULL
 =ğ
¢ode
)

148 
i
 = 0; i < 
ngbs
.
	`size
(); ++i)

150 if(
	`IsPosVis™ed
(
ngbs
[
i
]))

155 
A¡¬Node
 * 
node
 = 
	`G‘Node
(
ngbs
[
i
]);

156 
	`as£¹
(
node
 !ğ
NULL
);

157 
	`S‘PosVis™ed
(
ngbs
[
i
]);

158 if(!
	`pâIsP©hNode
(*
node
))

163 
node
->
·»Á
 = 
¢ode
;

164 
node
->
g
 = 
¢ode
->g+1;

166 if(
ngbs
[
i
] =ğ
posD¡
)

170 
	`In£¹IÁoO³nLi¡
(
ngbs
[
i
]);

173 
	}
}

177 
	gASr2D
::
	$C®cS‹pP©h
(
iS‹pNum
)

179 
Pos2D
 
pos
;

180 
iS‹p
 = 0;

183 if(
	`PİMšCo¡NodePos
(
pos
))

187 
	`In£¹IÁoClo£Li¡
(
pos
);

191 
»t
 = 
	`Ex‹ndNode
(
pos
);

192 if(0 =ğ
»t
)

196 ifĞ
»t
 < 0 )

200 
iS‹p
++;

201 }
iS‹p
 < 
iS‹pNum
 );

204 
	}
}

205 
Pos2D
 
	gASr2D
::
	$G‘IÂ”NodePos
(cÚ¡ 
A¡¬Node
* 
node
)

207 
iOff£t
 = 
node
 - 
p2DMeshD©a
;

208 
	`as£¹
(
iOff£t
 >ğ0 && iOff£ˆ< 
iM­Width
*
iM­Height
);

209  
	`Pos2D
(
iOff£t
/
iM­Width
,iOffset%iMapWidth);

210 
	}
}

212 cÚ¡ 
	gveùÜ
<
	gPos2D
> & 
	gASr2D
::
	$G‘P©h
( )

214 
A¡¬Node
 * 
node
 = 
	`G‘Node
(
posD¡
);

215 if(
node
->
iVis™
 !ğ
iV¡Magic
)

217 
vecP©h
.
	`ş—r
();

221 
vecP©h
.
	`push_back
(
	`G‘IÂ”NodePos
(
node
));

222 
node
 =‚ode->
·»Á
;

224 
node
 !ğ
NULL
);

226  
vecP©h
;

227 
	}
}

228 
	gASr2D
::
	$De¡roy
()

230 
	`SAFE_DELETE
(
p2DMeshD©a
);

231 
vecP©h
.
	`ş—r
();

232 
iV¡Magic
 = 0;

233 
	}
}

	@AStar.h

2 #´agm¨
Úû


4 
	~"ba£/¡dšc.h
"

6 
	sPos2D


8 
	mx
;

9 
	my
;

10 
Pos2D
(
_x
 = 0,
_y
 = 0):
x
(_x),
y
(_y){}

11 
Re£t
(
_x
 = 0,
_y
 = 0)

13 
x
 = 
_x
;

14 
	my
 = 
_y
;

16 
	mPos2D
 & 
	mİ”©Ü
 = (cÚ¡ 
Pos2D
& 
pos
)

18 if(&
pos
 =ğ
this
 )

20  *
this
;

22 
	mx
 = 
pos
.
x
;

23 
	my
 = 
pos
.
y
;

24  *
	mthis
;

26 
Mªh©tÚDi¡
(cÚ¡ 
Pos2D
& 
pos
)

28  
sq¹
((
pos
.
x
-x)*Õos.x-xè+ (pos.
y
-y)*(pos.y-y));

31 
EuËrDi¡
(cÚ¡ 
Pos2D
& 
pos
)

33  
abs
(
pos
.
y
 - yè+‡bsÕos.
x
 - x);

35 
boŞ
 
	mİ”©Ü
 =ğ(cÚ¡ 
Pos2D
& 
pos
)

37  (
x
 =ğ
pos
.x && 
y
 ==…os.y);

41 
	gA¡¬Node
;

42 
	sA¡¬Node


44 * 
	mpD©a
;

45 
	miVis™
;

46 
	mg
;

47 
A¡¬Node
 * 
	m·»Á
;

70 şas 
	cASr2D


72 
	mpublic
:

73 
	$boŞ
 (* 
	tPFNIsP©hNode
)(
	tA¡¬Node
& 
	tnode
);

74 
public
:

75 ~
	`ASr2D
();

76 
	`In™
(
iWidth
,
iHeight
);

78 
A¡¬Node
 * 
	`G‘Node
(
Pos2D
 
pos
);

79 
	`ReC®cP©h
(
Pos2D
 
¤c
,Pos2D 
d¡
);

80 
	`S‘PosVis™ed
(cÚ¡ 
Pos2D
 & 
pos
);

81 
	`In£¹IÁoO³nLi¡
(cÚ¡ 
Pos2D
& 
pos
);

82 
	`In£¹IÁoClo£Li¡
(cÚ¡ 
Pos2D
& 
pos
);

83 
boŞ
 
	`IsPosInV®id
(cÚ¡ 
Pos2D
 & 
pos
);

84 
	`G‘NodeNeighbÜs
(
Pos2D
 
pos
,
veùÜ
<Pos2D> &
ngbs
);

87 
	`PİMšCo¡NodePos
(
Pos2D
 & 
pos
);

88 
boŞ
 
	`IsPosVis™ed
(cÚ¡ 
Pos2D
& 
pos
);

89 
	`S‘PFNIsP©hNode
(
PFNIsP©hNode
 
_pâIsP©hNode
);

90 
	`Ex‹ndNode
(
Pos2D
& 
pos
);

94 
	`C®cS‹pP©h
(
iS‹pNum
);

95 
Pos2D
 
	`G‘IÂ”NodePos
(cÚ¡ 
A¡¬Node
* 
node
);

96 cÚ¡ 
veùÜ
<
Pos2D
> & 
	`G‘P©h
();

97 
	`De¡roy
();

98 
´iv©e
:

99 
iM­Width
;

100 
iM­Height
;

101 
Pos2D
 
posSrc
;

102 
Pos2D
 
posD¡
;

103 
A¡¬Node
* 
p2DMeshD©a
;

104 
veùÜ
<
Pos2D
> 
vecP©h
;

105 
veùÜ
<
Pos2D
> 
İ’Li¡
;

106 
veùÜ
<
Pos2D
> 
şo£Li¡
;

107 
iV¡Magic
;

108 
PFNIsP©hNode
 
pâIsP©hNode
;

	@BinarySearch.h

1 #´agm¨
Úû


4 
	g‹m¶©e
<
şass
 
	gU
 , cÏs 
	gCom·»
 = 
¡d
::
Ëss
<
U
> >

5 şas 
	cBš¬yS—rch


7 
´Ùeùed
:

8 
¡d
::
	tveùÜ
<
	tU
> 
	tLi¡Ty³
;

9 
	mLi¡Ty³
::
	t™”©Ü
 
	tLi¡Ty³IŒ
;

11 
	mpublic
:

13 
‹m¶©e
<
şass
 
IŒ
>

15 
	$In™
(
IŒ
 
fœ¡
,IŒ 
Ï¡
)

17 
li¡
.
	`assign
(
fœ¡
,
Ï¡
);

18 
Com·»
 
comp
;

19 
¡d
::
	`sÜt
(
li¡
.
	`begš
(),li¡.
	`’d
(),
comp
);

22 
	$In™
(
iRe£rveSize
 = 16)

24 
li¡
.
	`»£rve
(
iRe£rveSize
);

25 
	}
}

29 
Li¡Ty³IŒ
 
	$Loww”Bound
(cÚ¡ 
U
 & 
u
)

33 
Com·»
 
comp
;

34 
Li¡Ty³IŒ
 
™
 = 
li¡
.
	`begš
(),

35 
fœ¡
 = 
li¡
.
	`begš
();

36 
ty³Çme
 
¡d
::
™”©Ü_Œa™s
<
Li¡Ty³IŒ
>::
difã»nû_ty³
 
couÁ
, 
¡•
;

38 
ušt32_t
 
couÁ
 = 
¡d
::
	`di¡ªû
(
fœ¡
,
li¡
.
	`’d
());

39 
couÁ
 > 0)

41 
™
 = 
fœ¡
;

42 
¡•
 = 
couÁ
>>1;

43 
¡d
::
	`advªû
(
™
, 
¡•
);

44 ià(
	`comp
(*
™
,
u
))

46 
fœ¡
 = ++
™
;

47 
couÁ
 -ğ
¡•
 + 1;

51 
couÁ
 = 
¡•
;

54  
fœ¡
;

55 
	}
}

58 
Li¡Ty³IŒ
 
	$Uµ”Bound
(cÚ¡ 
U
 & 
u
)

61 
Com·»
 
comp
;

62 
Li¡Ty³IŒ
 
™
 = 
li¡
.
	`begš
(),

63 
fœ¡
 = 
li¡
.
	`begš
();

64 
ty³Çme
 
¡d
::
™”©Ü_Œa™s
<
Li¡Ty³IŒ
>::
difã»nû_ty³
 
couÁ
, 
¡•
;

66 
ušt32_t
 
couÁ
 = 
¡d
::
	`di¡ªû
(
fœ¡
,
li¡
.
	`’d
());

67 
couÁ
 > 0) {

68 
™
 = 
fœ¡
;

69 
¡•
 = 
couÁ
>>1;

70 
¡d
::
	`advªû
(
™
, 
¡•
);

71 if(!
	`comp
(*
™
,
u
))

73 
fœ¡
 = ++
™
;

74 
couÁ
 -ğ
¡•
 + 1;

78 
couÁ
 = 
¡•
;

81  
fœ¡
;

82 
	}
}

83 
Li¡Ty³IŒ
 
	$’d
()

85  
li¡
.
	`’d
();

86 
	}
}

92 
	$In£¹
(cÚ¡ 
U
& 
u
 , 
boŞ
 
bIn£¹Wh’Eu®
 = 
çl£
 )

96 
Li¡Ty³IŒ
 
™
 = 
	`Uµ”Bound
(
u
);

97 if(
™
 =ğ
	`’d
())

99 
	`Aµ’d
(
u
);

102 if(
™
 !ğ
li¡
.
	`begš
())

105 if(!
bIn£¹Wh’Eu®
 && 
	`equ®
(*(
™
-1),
u
))

112 
li¡
.
	`š£¹
(
™
,
u
);

113 
	}
}

114 
boŞ
 
	$equ®
(cÚ¡ 
U
& 
u1
,cÚ¡ U& 
u2
)

116  !
	`Com·»
()(
u1
,
u2
) && !Compare()(u2,u1);

117 
	}
}

118 
	$Aµ’d
(cÚ¡ 
U
& 
u
)

120 if(!
li¡
.
	`em±y
())

122 
	`as£¹
(!
	`Com·»
()(
u
,
li¡
.
	`back
()));

124 
li¡
.
	`push_back
(
u
);

125 
	}
}

127 
	$Remove1¡
(cÚ¡ 
U
& 
u
)

129 
Li¡Ty³IŒ
 
™
 = 
	`Loww”Bound
(
u
);

130 if(
™
 !ğ
	`’d
())

132 if(
	`equ®
(*
™
,
u
))

135 
li¡
.
	`”a£
(
™
);

141 
	}
}

142 
	$RemoveAÎ
(cÚ¡ 
U
& 
u
)

144 
Li¡Ty³IŒ
 
™1
 = 
	`Loww”Bound
(
u
);

145 
Li¡Ty³IŒ
 
™2
 = 
	`Uµ”Bound
(
u
);

146 if(
™1
 !ğ
™2
)

148 
li¡
.
	`”a£
(
™1
,
™2
);

152 
	}
}

154 
U
* 
	$Fšd1¡
(cÚ¡ 
U
 & 
u
)

156 
Li¡Ty³IŒ
 
™
 = 
	`Loww”Bound
(
u
);

157 if(
™
 !ğ
	`’d
())

159 if(
	`equ®
(*
™
,
u
))

161  &(
li¡
.
	`©
(
™
-li¡.
	`begš
()));

164  
NULL
;

165 
	}
}

166 
FšdAÎ
(cÚ¡ 
U
 & 
u
,
¡d
::
veùÜ
<U> & 
¾¡
)

168 
¾¡
.
ş—r
();

169 
Li¡Ty³IŒ
 
	g™
 = 
Loww”Bound
(
u
);

170 
	g™
 !ğ
’d
() &&

171 
equ®
(*
™
,
u
))

173 
	g¾¡
.
push_back
(*
™
);

176 
	g´iv©e
:

177 
¡d
::
veùÜ
<
U
> 
li¡
;

	@BinarySearchTree.h

1 #´agm¨
Úû


4 
	g‹m¶©e
 <
şass
 
	gU
>

5 
şass
 
	gBš¬yS—rchT»e
.
	gh


7 
	gpublic
:

8 
In£¹
(cÚ¡ 
U
 & 
u
);

9 
Remove
(cÚ¡ 
U
 & 
u
);

10 
U
 * 
Fšd
(cÚ¡ U & 
u
);

	@Heap.hpp

2 #´agm¨
Úû


4 
	~"ba£/¡dšc.h
"

6 
	g‹m¶©e
<
şass
 
	gU
,şas 
	gCom·»
 = 
¡d
::
Ëss
<
U
> >

7 şas 
	cH—p


9 
public
:

10 
‹m¶©e
< 
şass
 
FÜw¬dIt
 >

11 
	$Push
(
FÜw¬dIt
 
fœ¡
,FÜw¬dIˆ
Ï¡
)

13 
FÜw¬dIt
 
™
 = 
fœ¡
;

14 
™
 !ğ
Ï¡
)

16 
	`Push
(*
™
);

17 ++
™
;

21 
	$Push
(cÚ¡ 
U
 & 
u
)

23 
h—p
.
	`push_back
(
u
);

24 
¡d
::
	`push_h—p
(
h—p
.
	`begš
(),h—p.
	`’d
(),
	`Com·»
());

26 
	}
}

27 
	$Pİ
(
U
& 
u
)

29 if(
h—p
.
	`em±y
())

33 
¡d
::
	`pİ_h—p
(
h—p
.
	`begš
(),h—p.
	`’d
(),
	`Com·»
());

34 
u
 = 
h—p
.
	`back
();

35 
h—p
.
	`pİ_back
();

37 
	}
}

38 
	$CouÁ
()

40  
h—p
.
	`size
();

41 
	}
}

42 
	g‹m¶©e
< 
şass
 
	gCom·»
 >

43 
SÜt
(
veùÜ
<
U
> & 
sÜ‹dH—p
)

45 
	gsÜ‹dH—p
 = 
h—p
;

46 
sÜt_h—p
(
sÜ‹dH—p
.
begš
(),sÜ‹dH—p.
’d
(),
Com·»
());

48 
	g´iv©e
:

49 
¡d
::
veùÜ
<
U
> 
h—p
;

	@RBTree.h

1 #´agm¨
Úû


5 şas 
	cRBT»e


	@
1
.
1
/usr/include
6
70
AStar.cpp
AStar.h
BinarySearch.h
BinarySearchTree.h
Heap.hpp
RBTree.h
